{"version":3,"sources":["webpack://shifty/webpack/universalModuleDefinition","webpack://shifty/webpack/bootstrap","webpack://shifty/./src/tweenable.js","webpack://shifty/./src/easing-functions.js","webpack://shifty/(webpack)/buildin/global.js","webpack://shifty/./src/token.js","webpack://shifty/./src/interpolate.js","webpack://shifty/./src/scene.js","webpack://shifty/./src/bezier.js","webpack://shifty/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","global","scheduleFunction","requestAnimationFrame","webkitRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","mozCancelRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","noop","listHead","listTail","formulas","easingFunctions","tweenProps","forPosition","currentState","originalState","targetState","duration","timestamp","easing","normalizedPosition","easingObjectProp","easingFn","start","processTween","tween","currentTime","_data","_currentState","_delay","_easing","_originalState","_duration","_render","_targetState","_timestamp","endTime","timeToCompute","offset","stop","_applyFilter","processTweens","Tweenable","now","nextTween","_next","composeEasingObject","fromTweenParams","composedEasing","typeofEasing","prop","remove","_previous","previousTween","initialState","config","undefined","this","setConfig","filterName","_filters","filter","_config","_isPlaying","_pausedAtTime","_start","resume","patchedConfig","attachment","data","promise","Promise","render","step","delay","from","to","_scheduleId","filters","length","doesApply","push","_promise","resolve","_resolve","state","scheduleUpdate","millisecond","Math","max","gotoEnd","tweenable","setScheduleFunction","fn","Date","linear","pos","easeInQuad","pow","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeOutBounce","easeInBack","easeOutBack","easeInOutBack","elastic","swingFromTo","swingFrom","swingTo","bounce","bouncePast","easeFromTo","easeFrom","easeTo","g","Function","e","number","comma","R_NUMBER_COMPONENT","R_FORMAT_CHUNKS","R_UNFORMATTED_VALUES","R_RGB","source","RegExp","R_RGB_PREFIX","R_HEX","getFormatChunksFrom","rawValues","prefix","map","val","hexToDec","hex","parseInt","convertHexToRGB","hexString","replace","split","substr","join","filterStringChunks","pattern","unfilteredString","patternMatches","match","filteredString","forEach","sanitizeObjectForHexProps","stateObject","currentProp","sanitizeRGBChunk","rgbChunk","numbers","floor","getValuesFrom","formattedString","extractPropertyChunks","chunkNames","extractedValues","chunkName","getValuesList","getFormattedValues","formatString","rawValue","toFixed","keys","some","tweenCreated","_tokenData","chunks","signatures","propertyName","charAt","unshift","getFormatSignatures","beforeTween","easingObject","tokenData","easingNames","defaultEasing","expandEasingObject","formatSignatures","expandFormattedProperties","afterTween","collapseFormattedProperties","firstEasing","easingName","collapseEasingObject","mockTweenable","interpolate","position","current","set","interpolatedValues","Scene","tweenables","add","index","indexOf","splice","isPlaying","pause","cubicBezierAtTime","p1x","p1y","p2x","p2y","x","epsilon","ax","bx","cx","ay","by","cy","sampleCurveX","sampleCurveDerivativeX","fabs","solveEpsilon","sampleCurveY","t0","t1","t2","x2","d2","solveCurveX","setBezierFunction","x1","y1","y2","cubicBezierTransition","getCubicBezierTransition","displayName","unsetBezierFunction","token"],"mappings":"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","file":"shifty.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"shifty\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"shifty\"] = factory();\n\telse\n\t\troot[\"shifty\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import * as easingFunctions from './easing-functions'\r\n\r\n// CONSTANTS\r\nconst DEFAULT_EASING = 'linear'\r\nconst DEFAULT_DURATION = 500\r\nconst UPDATE_TIME = 1000 / 60\r\nconst root = typeof window !== 'undefined' ? window : global\r\n\r\nconst AFTER_TWEEN = 'afterTween'\r\nconst AFTER_TWEEN_END = 'afterTweenEnd'\r\nconst BEFORE_TWEEN = 'beforeTween'\r\nconst TWEEN_CREATED = 'tweenCreated'\r\nconst TYPE_FUNCTION = 'function'\r\nconst TYPE_STRING = 'string'\r\n\r\n// requestAnimationFrame() shim by Paul Irish (modified for Shifty)\r\n// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\nlet scheduleFunction =\r\n  root.requestAnimationFrame ||\r\n  root.webkitRequestAnimationFrame ||\r\n  root.oRequestAnimationFrame ||\r\n  root.msRequestAnimationFrame ||\r\n  (root.mozCancelRequestAnimationFrame && root.mozRequestAnimationFrame) ||\r\n  setTimeout\r\n\r\nconst noop = () => {}\r\n\r\nlet listHead = null\r\nlet listTail = null\r\n\r\n// Strictly used for testing\r\nexport const resetList = () => (listHead = listTail = null)\r\nexport const getListHead = () => listHead\r\nexport const getListTail = () => listTail\r\n\r\nconst formulas = { ...easingFunctions }\r\n\r\n/**\r\n * Calculates the interpolated tween values of an Object for a given\r\n * timestamp.\r\n * @param {number} forPosition The position to compute the state for.\r\n * @param {Object} currentState Current state properties.\r\n * @param {Object} originalState: The original state properties the Object is\r\n * tweening from.\r\n * @param {Object} targetState: The destination state properties the Object\r\n * is tweening to.\r\n * @param {number} duration: The length of the tween in milliseconds.\r\n * @param {number} timestamp: The UNIX epoch time at which the tween began.\r\n * @param {Object<string|Function>} easing: This Object's keys must correspond\r\n * to the keys in targetState.\r\n * @returns {Object}\r\n * @private\r\n */\r\nexport const tweenProps = (\r\n  forPosition,\r\n  currentState,\r\n  originalState,\r\n  targetState,\r\n  duration,\r\n  timestamp,\r\n  easing\r\n) => {\r\n  const normalizedPosition =\r\n    forPosition < timestamp ? 0 : (forPosition - timestamp) / duration\r\n\r\n  for (const key in currentState) {\r\n    const easingObjectProp = easing[key]\r\n    const easingFn = easingObjectProp.call\r\n      ? easingObjectProp\r\n      : formulas[easingObjectProp]\r\n\r\n    const start = originalState[key]\r\n\r\n    currentState[key] =\r\n      start + (targetState[key] - start) * easingFn(normalizedPosition)\r\n  }\r\n\r\n  return currentState\r\n}\r\n\r\nconst processTween = (tween, currentTime) => {\r\n  const { _data, _currentState, _delay, _easing, _originalState } = tween\r\n  let { _duration, _render, _targetState, _timestamp } = tween\r\n\r\n  const endTime = _timestamp + _delay + _duration\r\n  let timeToCompute = currentTime > endTime ? endTime : currentTime\r\n  const hasEnded = timeToCompute >= endTime\r\n  const offset = _duration - (endTime - timeToCompute)\r\n\r\n  if (hasEnded) {\r\n    _render(_targetState, _data, offset)\r\n    tween.stop(true)\r\n  } else {\r\n    tween._applyFilter(BEFORE_TWEEN)\r\n\r\n    // If the animation has not yet reached the start point (e.g., there was\r\n    // delay that has not yet completed), just interpolate the starting\r\n    // position of the tween.\r\n    if (timeToCompute < _timestamp + _delay) {\r\n      timeToCompute = 1\r\n      _duration = 1\r\n      _timestamp = 1\r\n    } else {\r\n      _timestamp += _delay\r\n    }\r\n\r\n    tweenProps(\r\n      timeToCompute,\r\n      _currentState,\r\n      _originalState,\r\n      _targetState,\r\n      _duration,\r\n      _timestamp,\r\n      _easing\r\n    )\r\n\r\n    tween._applyFilter(AFTER_TWEEN)\r\n    _render(_currentState, _data, offset)\r\n  }\r\n}\r\n\r\n/**\r\n * Process all tweens currently managed by Shifty for the current tick. This\r\n * does not perform any timing or update scheduling; it is the logic that is\r\n * run *by* the scheduling functionality. Specifically, it computes the state\r\n * and calls all of the relevant {@link shifty.tweenConfig} functions supplied\r\n * to each of the tweens for the current point in time (as determined by {@link\r\n * shifty.Tweenable.now}.\r\n *\r\n * This is a low-level API that won't be needed in the majority of situations.\r\n * It is primarily useful as a hook for higher-level animation systems that are\r\n * built on top of Shifty. If you need this function, it is likely you need to\r\n * pass something like `() => {}` to {@link\r\n * shifty.Tweenable.setScheduleFunction}, override {@link shifty.Tweenable.now}\r\n * and manage the scheduling logic yourself.\r\n *\r\n * @method shifty.processTweens\r\n * @see https://github.com/jeremyckahn/shifty/issues/109\r\n */\r\nexport const processTweens = () => {\r\n  const currentTime = Tweenable.now()\r\n  let tween = listHead\r\n\r\n  while (tween) {\r\n    const nextTween = tween._next\r\n    processTween(tween, currentTime)\r\n    tween = nextTween\r\n  }\r\n}\r\n\r\n/**\r\n * Handles the update logic for one tick of a tween.\r\n * @param {number} [currentTimeOverride] Needed for accurate timestamp in\r\n * shifty.Tweenable#seek.\r\n * @private\r\n */\r\nexport const scheduleUpdate = () => {\r\n  if (!listHead) {\r\n    return\r\n  }\r\n\r\n  scheduleFunction.call(root, scheduleUpdate, UPDATE_TIME)\r\n\r\n  processTweens()\r\n}\r\n\r\n/**\r\n * Creates a usable easing Object from a string, a function or another easing\r\n * Object.  If `easing` is an Object, then this function clones it and fills\r\n * in the missing properties with `\"linear\"`.\r\n * @param {Object.<string|Function>} fromTweenParams\r\n * @param {Object|string|Function} easing\r\n * @return {Object.<string|Function>}\r\n * @private\r\n */\r\nexport const composeEasingObject = (\r\n  fromTweenParams,\r\n  easing = DEFAULT_EASING\r\n) => {\r\n  const composedEasing = {}\r\n  let typeofEasing = typeof easing\r\n\r\n  if (typeofEasing === TYPE_STRING || typeofEasing === TYPE_FUNCTION) {\r\n    for (const prop in fromTweenParams) {\r\n      composedEasing[prop] = easing\r\n    }\r\n  } else {\r\n    for (const prop in fromTweenParams) {\r\n      composedEasing[prop] = easing[prop] || DEFAULT_EASING\r\n    }\r\n  }\r\n\r\n  return composedEasing\r\n}\r\n\r\nconst remove = tween => {\r\n  // Adapted from:\r\n  // https://github.com/trekhleb/javascript-algorithms/blob/7c9601df3e8ca4206d419ce50b88bd13ff39deb6/src/data-structures/doubly-linked-list/DoublyLinkedList.js#L73-L121\r\n  if (tween === listHead) {\r\n    listHead = tween._next\r\n\r\n    if (listHead) {\r\n      listHead._previous = null\r\n    } else {\r\n      listTail = null\r\n    }\r\n  } else if (tween === listTail) {\r\n    listTail = tween._previous\r\n\r\n    if (listTail) {\r\n      listTail._next = null\r\n    } else {\r\n      listHead = null\r\n    }\r\n  } else {\r\n    const previousTween = tween._previous\r\n    const nextTween = tween._next\r\n\r\n    previousTween._next = nextTween\r\n    nextTween._previous = previousTween\r\n  }\r\n\r\n  // Clean up any references in case the tween is restarted later.\r\n  tween._previous = tween._next = null\r\n}\r\n\r\nexport class Tweenable {\r\n  _config = null\r\n  _filters = []\r\n  _next = null\r\n  _previous = null\r\n  _timestamp = null\r\n\r\n  /**\r\n   * @param {Object} [initialState={}] The values that the initial tween should\r\n   * start at if a `from` value is not provided to {@link\r\n   * shifty.Tweenable#tween} or {@link shifty.Tweenable#setConfig}.\r\n   * @param {shifty.tweenConfig} [config] Configuration object to be passed to\r\n   * {@link shifty.Tweenable#setConfig}.\r\n   * @constructs shifty.Tweenable\r\n   */\r\n  constructor(initialState = {}, config = undefined) {\r\n    this._currentState = initialState\r\n\r\n    // To prevent unnecessary calls to setConfig do not set default\r\n    // configuration here.  Only set default configuration immediately before\r\n    // tweening if none has been set.\r\n    if (config) {\r\n      this.setConfig(config)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies a filter to Tweenable instance.\r\n   * @param {string} filterName The name of the filter to apply.\r\n   * @private\r\n   */\r\n  _applyFilter(filterName) {\r\n    for (const filterType of this._filters) {\r\n      const filter = filterType[filterName]\r\n\r\n      if (filter) {\r\n        filter(this)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Configure and start a tween. If this {@link shifty.Tweenable}'s instance\r\n   * is already running, then it will stop playing the old tween and\r\n   * immediately play the new one.\r\n   * @method shifty.Tweenable#tween\r\n   * @param {shifty.tweenConfig} [config] Gets passed to {@link\r\n   * shifty.Tweenable#setConfig}.\r\n   * @return {external:Promise} This `Promise` resolves with a {@link\r\n   * shifty.promisedData} object.\r\n   */\r\n  tween(config = undefined) {\r\n    const { _data, _config } = this\r\n\r\n    if (this._isPlaying) {\r\n      this.stop()\r\n    }\r\n\r\n    if (config || !_config) {\r\n      this.setConfig(config)\r\n    }\r\n\r\n    this._pausedAtTime = null\r\n    this._timestamp = Tweenable.now()\r\n    this._start(this.get(), _data)\r\n\r\n    return this.resume()\r\n  }\r\n\r\n  /**\r\n   * Configure a tween that will start at some point in the future. Aside from\r\n   * `delay`, `from`, and `to`, each configuration option will automatically\r\n   * default to the same option used in the preceding tween of this {@link\r\n   * shifty.Tweenable} instance.\r\n   * @method shifty.Tweenable#setConfig\r\n   * @param {shifty.tweenConfig} [config={}]\r\n   * @return {shifty.Tweenable}\r\n   */\r\n  setConfig(config = {}) {\r\n    const patchedConfig = { ...this._config, ...config }\r\n\r\n    // Configuration options to reuse from previous tweens\r\n    const {\r\n      attachment,\r\n      data,\r\n      duration = DEFAULT_DURATION,\r\n      easing,\r\n      promise = Promise,\r\n      start = noop,\r\n      render = patchedConfig.step || noop,\r\n\r\n      // Legacy option. Superseded by `render`.\r\n      step = noop,\r\n    } = (this._config = patchedConfig)\r\n\r\n    // Configuration options not to reuse\r\n    const { delay = 0, from, to } = config\r\n\r\n    // Attach something to this Tweenable instance (e.g.: a DOM element, an\r\n    // object, a string, etc.);\r\n    this._data = data || attachment\r\n\r\n    // Init the internal state\r\n    this._isPlaying = false\r\n    this._pausedAtTime = null\r\n    this._scheduleId = null\r\n    this._delay = delay\r\n    this._start = start\r\n    this._render = render || step\r\n    this._duration = duration\r\n    this._currentState = { ...(from || this.get()) }\r\n    this._originalState = this.get()\r\n    this._targetState = { ...(to || this.get()) }\r\n\r\n    const { _currentState } = this\r\n    // Ensure that there is always something to tween to.\r\n    this._targetState = { ..._currentState, ...this._targetState }\r\n\r\n    this._easing = composeEasingObject(_currentState, easing)\r\n\r\n    const { filters } = Tweenable\r\n    this._filters.length = 0\r\n\r\n    for (const name in filters) {\r\n      if (filters[name].doesApply(this)) {\r\n        this._filters.push(filters[name])\r\n      }\r\n    }\r\n\r\n    this._applyFilter(TWEEN_CREATED)\r\n\r\n    this._promise = new promise(resolve => {\r\n      this._resolve = resolve\r\n    })\r\n\r\n    // Needed to silence (harmless) logged errors when a .catch handler is not\r\n    // added by downstream code\r\n    this._promise.catch(noop)\r\n\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * @method shifty.Tweenable#get\r\n   * @return {Object} The current state.\r\n   */\r\n  get() {\r\n    return { ...this._currentState }\r\n  }\r\n\r\n  /**\r\n   * Set the current state.\r\n   * @method shifty.Tweenable#set\r\n   * @param {Object} state The state to set.\r\n   */\r\n  set(state) {\r\n    this._currentState = state\r\n  }\r\n\r\n  /**\r\n   * Pause a tween. Paused tweens can be resumed from the point at which they\r\n   * were paused. If a tween is not running, this is a no-op.\r\n   * @method shifty.Tweenable#pause\r\n   * @return {shifty.Tweenable}\r\n   */\r\n  pause() {\r\n    if (!this._isPlaying) {\r\n      return\r\n    }\r\n\r\n    this._pausedAtTime = Tweenable.now()\r\n    this._isPlaying = false\r\n    remove(this)\r\n\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Resume a paused tween.\r\n   * @method shifty.Tweenable#resume\r\n   * @return {external:Promise}\r\n   */\r\n  resume() {\r\n    if (this._timestamp === null) {\r\n      return this.tween()\r\n    }\r\n\r\n    if (this._isPlaying) {\r\n      return this._promise\r\n    }\r\n\r\n    const currentTime = Tweenable.now()\r\n\r\n    if (this._pausedAtTime) {\r\n      this._timestamp += currentTime - this._pausedAtTime\r\n      this._pausedAtTime = null\r\n    }\r\n\r\n    this._isPlaying = true\r\n\r\n    if (listHead === null) {\r\n      listHead = this\r\n      listTail = this\r\n      scheduleUpdate()\r\n    } else {\r\n      this._previous = listTail\r\n      listTail._next = this\r\n\r\n      listTail = this\r\n    }\r\n\r\n    return this._promise\r\n  }\r\n\r\n  /**\r\n   * Move the state of the animation to a specific point in the tween's\r\n   * timeline.  If the animation is not running, this will cause {@link\r\n   * shifty.renderFunction} handlers to be called.\r\n   * @method shifty.Tweenable#seek\r\n   * @param {millisecond} millisecond The millisecond of the animation to seek\r\n   * to.  This must not be less than `0`.\r\n   * @return {shifty.Tweenable}\r\n   */\r\n  seek(millisecond) {\r\n    millisecond = Math.max(millisecond, 0)\r\n    const currentTime = Tweenable.now()\r\n\r\n    if (this._timestamp + millisecond === 0) {\r\n      return this\r\n    }\r\n\r\n    this._timestamp = currentTime - millisecond\r\n\r\n    if (!this._isPlaying) {\r\n      // If the animation is not running, call processTween to make sure that\r\n      // any render handlers are run.\r\n      processTween(this, currentTime)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Stops and cancels a tween. If a tween is not running, this is a no-op.\r\n   * @param {boolean} [gotoEnd] If `false`, the tween just stops at its current\r\n   * state.  If `true`, the tweened object's values are instantly set to the\r\n   * target values.\r\n   * @method shifty.Tweenable#stop\r\n   * @return {shifty.Tweenable}\r\n   */\r\n  stop(gotoEnd = false) {\r\n    const { _currentState, _data, _easing, _originalState, _targetState } = this\r\n\r\n    if (!this._isPlaying) {\r\n      return\r\n    }\r\n\r\n    this._isPlaying = false\r\n\r\n    remove(this)\r\n\r\n    if (gotoEnd) {\r\n      this._applyFilter(BEFORE_TWEEN)\r\n      tweenProps(1, _currentState, _originalState, _targetState, 1, 0, _easing)\r\n      this._applyFilter(AFTER_TWEEN)\r\n      this._applyFilter(AFTER_TWEEN_END)\r\n    }\r\n\r\n    this._resolve({\r\n      data: _data,\r\n      state: _currentState,\r\n      tweenable: this,\r\n    })\r\n\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Whether or not a tween is running.\r\n   * @method shifty.Tweenable#isPlaying\r\n   * @return {boolean}\r\n   */\r\n  isPlaying() {\r\n    return this._isPlaying\r\n  }\r\n\r\n  /**\r\n   * @method shifty.Tweenable#setScheduleFunction\r\n   * @param {shifty.scheduleFunction} scheduleFunction\r\n   * @deprecated Will be removed in favor of {@link shifty.Tweenable.setScheduleFunction} in 3.0.\r\n   */\r\n  setScheduleFunction(scheduleFunction) {\r\n    Tweenable.setScheduleFunction(scheduleFunction)\r\n  }\r\n\r\n  /**\r\n   * `delete` all \"own\" properties.  Call this when the {@link\r\n   * shifty.Tweenable} instance is no longer needed to free memory.\r\n   * @method shifty.Tweenable#dispose\r\n   */\r\n  dispose() {\r\n    for (const prop in this) {\r\n      delete this[prop]\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Set a custom schedule function.\r\n *\r\n * By default,\r\n * [`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame)\r\n * is used if available, otherwise\r\n * [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/Window.setTimeout)\r\n * is used.\r\n * @method shifty.Tweenable.setScheduleFunction\r\n * @param {shifty.scheduleFunction} fn The function to be\r\n * used to schedule the next frame to be rendered.\r\n * @return {shifty.scheduleFunction} The function that was set.\r\n */\r\nTweenable.setScheduleFunction = fn => (scheduleFunction = fn)\r\n\r\nTweenable.formulas = formulas\r\n\r\n/**\r\n * The {@link shifty.filter}s available for use.  These filters are\r\n * automatically applied at tween-time by Shifty. You can define your own\r\n * {@link shifty.filter}s and attach them to this object.\r\n * @member shifty.Tweenable.filters\r\n * @type {Object.<shifty.filter>}\r\n */\r\nTweenable.filters = {}\r\n\r\n/**\r\n * @method shifty.Tweenable.now\r\n * @static\r\n * @returns {number} The current timestamp.\r\n */\r\nTweenable.now = Date.now || (() => +new Date())\r\n\r\n/**\r\n * @method shifty.tween\r\n * @param {shifty.tweenConfig} [config={}]\r\n * @description Standalone convenience method that functions identically to\r\n * {@link shifty.Tweenable#tween}.  You can use this to create tweens without\r\n * needing to set up a {@link shifty.Tweenable} instance.\r\n *\r\n * ```\r\n * import { tween } from 'shifty';\r\n *\r\n * tween({ from: { x: 0 }, to: { x: 10 } }).then(\r\n *   () => console.log('All done!')\r\n * );\r\n * ```\r\n *\r\n * @returns {external:Promise} This `Promise` has a property called `tweenable`\r\n * that is the {@link shifty.Tweenable} instance that is running the tween.\r\n */\r\nexport function tween(config = {}) {\r\n  const tweenable = new Tweenable()\r\n  const promise = tweenable.tween(config)\r\n  promise.tweenable = tweenable\r\n\r\n  return promise\r\n}\r\n","/*!\r\n * All equations are adapted from Thomas Fuchs'\r\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).\r\n *\r\n * Based on Easing Equations (c) 2003 [Robert\r\n * Penner](http://www.robertpenner.com/), all rights reserved. This work is\r\n * [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).\r\n */\r\n\r\n/*!\r\n *  TERMS OF USE - EASING EQUATIONS\r\n *  Open source under the BSD License.\r\n *  Easing Equations (c) 2003 Robert Penner, all rights reserved.\r\n */\r\n\r\n/**\r\n * @member shifty.Tweenable.formulas\r\n * @description A static Object of {@link shifty.easingFunction}s that can by\r\n * used by Shifty. The default values are defined in\r\n * [`easing-functions.js`](easing-functions.js.html), but you can add your own\r\n * {@link shifty.easingFunction}s by defining them as keys to this Object.\r\n *\r\n * Shifty ships with an implementation of [Robert Penner's easing\r\n * equations](http://robertpenner.com/easing/), as adapted from\r\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js)'s\r\n * implementation.\r\n * <p data-height=\"934\" data-theme-id=\"0\" data-slug-hash=\"wqObdO\"\r\n * data-default-tab=\"js,result\" data-user=\"jeremyckahn\" data-embed-version=\"2\"\r\n * data-pen-title=\"Shifty - Easing formula names\" class=\"codepen\">See the Pen <a\r\n * href=\"https://codepen.io/jeremyckahn/pen/wqObdO/\">Shifty - Easing formula\r\n * names</a> by Jeremy Kahn (<a\r\n * href=\"https://codepen.io/jeremyckahn\">@jeremyckahn</a>) on <a\r\n * href=\"https://codepen.io\">CodePen</a>.</p>\r\n * <script async\r\n * src=\"https://production-assets.codepen.io/assets/embed/ei.js\"></script>\r\n * @type {Object.<shifty.easingFunction>}\r\n * @static\r\n */\r\n\r\nexport const linear = pos => pos\r\n\r\nexport const easeInQuad = pos => Math.pow(pos, 2)\r\n\r\nexport const easeOutQuad = pos => -(Math.pow(pos - 1, 2) - 1)\r\n\r\nexport const easeInOutQuad = pos =>\r\n  (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 2) : -0.5 * ((pos -= 2) * pos - 2)\r\n\r\nexport const easeInCubic = pos => Math.pow(pos, 3)\r\n\r\nexport const easeOutCubic = pos => Math.pow(pos - 1, 3) + 1\r\n\r\nexport const easeInOutCubic = pos =>\r\n  (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 3) : 0.5 * (Math.pow(pos - 2, 3) + 2)\r\n\r\nexport const easeInQuart = pos => Math.pow(pos, 4)\r\n\r\nexport const easeOutQuart = pos => -(Math.pow(pos - 1, 4) - 1)\r\n\r\nexport const easeInOutQuart = pos =>\r\n  (pos /= 0.5) < 1\r\n    ? 0.5 * Math.pow(pos, 4)\r\n    : -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2)\r\n\r\nexport const easeInQuint = pos => Math.pow(pos, 5)\r\n\r\nexport const easeOutQuint = pos => Math.pow(pos - 1, 5) + 1\r\n\r\nexport const easeInOutQuint = pos =>\r\n  (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 5) : 0.5 * (Math.pow(pos - 2, 5) + 2)\r\n\r\nexport const easeInSine = pos => -Math.cos(pos * (Math.PI / 2)) + 1\r\n\r\nexport const easeOutSine = pos => Math.sin(pos * (Math.PI / 2))\r\n\r\nexport const easeInOutSine = pos => -0.5 * (Math.cos(Math.PI * pos) - 1)\r\n\r\nexport const easeInExpo = pos => (pos === 0 ? 0 : Math.pow(2, 10 * (pos - 1)))\r\n\r\nexport const easeOutExpo = pos => (pos === 1 ? 1 : -Math.pow(2, -10 * pos) + 1)\r\n\r\nexport const easeInOutExpo = pos => {\r\n  if (pos === 0) {\r\n    return 0\r\n  }\r\n\r\n  if (pos === 1) {\r\n    return 1\r\n  }\r\n\r\n  if ((pos /= 0.5) < 1) {\r\n    return 0.5 * Math.pow(2, 10 * (pos - 1))\r\n  }\r\n\r\n  return 0.5 * (-Math.pow(2, -10 * --pos) + 2)\r\n}\r\n\r\nexport const easeInCirc = pos => -(Math.sqrt(1 - pos * pos) - 1)\r\n\r\nexport const easeOutCirc = pos => Math.sqrt(1 - Math.pow(pos - 1, 2))\r\n\r\nexport const easeInOutCirc = pos =>\r\n  (pos /= 0.5) < 1\r\n    ? -0.5 * (Math.sqrt(1 - pos * pos) - 1)\r\n    : 0.5 * (Math.sqrt(1 - (pos -= 2) * pos) + 1)\r\n\r\nexport const easeOutBounce = pos => {\r\n  if (pos < 1 / 2.75) {\r\n    return 7.5625 * pos * pos\r\n  } else if (pos < 2 / 2.75) {\r\n    return 7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75\r\n  } else if (pos < 2.5 / 2.75) {\r\n    return 7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375\r\n  } else {\r\n    return 7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375\r\n  }\r\n}\r\n\r\nexport const easeInBack = pos => {\r\n  const s = 1.70158\r\n  return pos * pos * ((s + 1) * pos - s)\r\n}\r\n\r\nexport const easeOutBack = pos => {\r\n  const s = 1.70158\r\n  return (pos = pos - 1) * pos * ((s + 1) * pos + s) + 1\r\n}\r\n\r\nexport const easeInOutBack = pos => {\r\n  let s = 1.70158\r\n  if ((pos /= 0.5) < 1) {\r\n    return 0.5 * (pos * pos * (((s *= 1.525) + 1) * pos - s))\r\n  }\r\n  return 0.5 * ((pos -= 2) * pos * (((s *= 1.525) + 1) * pos + s) + 2)\r\n}\r\n\r\nexport const elastic = pos =>\r\n  -1 * Math.pow(4, -8 * pos) * Math.sin(((pos * 6 - 1) * (2 * Math.PI)) / 2) + 1\r\n\r\nexport const swingFromTo = pos => {\r\n  let s = 1.70158\r\n  return (pos /= 0.5) < 1\r\n    ? 0.5 * (pos * pos * (((s *= 1.525) + 1) * pos - s))\r\n    : 0.5 * ((pos -= 2) * pos * (((s *= 1.525) + 1) * pos + s) + 2)\r\n}\r\n\r\nexport const swingFrom = pos => {\r\n  const s = 1.70158\r\n  return pos * pos * ((s + 1) * pos - s)\r\n}\r\n\r\nexport const swingTo = pos => {\r\n  const s = 1.70158\r\n  return (pos -= 1) * pos * ((s + 1) * pos + s) + 1\r\n}\r\n\r\nexport const bounce = pos => {\r\n  if (pos < 1 / 2.75) {\r\n    return 7.5625 * pos * pos\r\n  } else if (pos < 2 / 2.75) {\r\n    return 7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75\r\n  } else if (pos < 2.5 / 2.75) {\r\n    return 7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375\r\n  } else {\r\n    return 7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375\r\n  }\r\n}\r\n\r\nexport const bouncePast = pos => {\r\n  if (pos < 1 / 2.75) {\r\n    return 7.5625 * pos * pos\r\n  } else if (pos < 2 / 2.75) {\r\n    return 2 - (7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75)\r\n  } else if (pos < 2.5 / 2.75) {\r\n    return 2 - (7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375)\r\n  } else {\r\n    return 2 - (7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375)\r\n  }\r\n}\r\n\r\nexport const easeFromTo = pos =>\r\n  (pos /= 0.5) < 1\r\n    ? 0.5 * Math.pow(pos, 4)\r\n    : -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2)\r\n\r\nexport const easeFrom = pos => Math.pow(pos, 4)\r\n\r\nexport const easeTo = pos => Math.pow(pos, 0.25)\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","const R_NUMBER_COMPONENT = /(\\d|-|\\.)/\r\nconst R_FORMAT_CHUNKS = /([^\\-0-9.]+)/g\r\nconst R_UNFORMATTED_VALUES = /[0-9.-]+/g\r\nconst R_RGB = (() => {\r\n  const number = R_UNFORMATTED_VALUES.source\r\n  const comma = /,\\s*/.source\r\n\r\n  return new RegExp(`rgb\\\\(${number}${comma}${number}${comma}${number}\\\\)`, 'g')\r\n})()\r\nconst R_RGB_PREFIX = /^.*\\(/\r\nconst R_HEX = /#([0-9]|[a-f]){3,6}/gi\r\nconst VALUE_PLACEHOLDER = 'VAL'\r\n\r\n// HELPERS\r\n\r\n/**\r\n * @param {Array.number} rawValues\r\n * @param {string} prefix\r\n *\r\n * @return {Array.<string>}\r\n * @private\r\n */\r\nconst getFormatChunksFrom = (rawValues, prefix) =>\r\n  rawValues.map((val, i) => `_${prefix}_${i}`)\r\n\r\n/**\r\n * @param {string} formattedString\r\n *\r\n * @return {string}\r\n * @private\r\n */\r\nconst getFormatStringFrom = formattedString => {\r\n  let chunks = formattedString.match(R_FORMAT_CHUNKS)\r\n\r\n  if (!chunks) {\r\n    // chunks will be null if there were no tokens to parse in\r\n    // formattedString (for example, if formattedString is '2').  Coerce\r\n    // chunks to be useful here.\r\n    chunks = ['', '']\r\n\r\n    // If there is only one chunk, assume that the string is a number\r\n    // followed by a token...\r\n    // NOTE: This may be an unwise assumption.\r\n  } else if (\r\n    chunks.length === 1 ||\r\n    // ...or if the string starts with a number component (\".\", \"-\", or a\r\n    // digit)...\r\n    formattedString.charAt(0).match(R_NUMBER_COMPONENT)\r\n  ) {\r\n    // ...prepend an empty string here to make sure that the formatted number\r\n    // is properly replaced by VALUE_PLACEHOLDER\r\n    chunks.unshift('')\r\n  }\r\n\r\n  return chunks.join(VALUE_PLACEHOLDER)\r\n}\r\n\r\n/**\r\n * Convert a base-16 number to base-10.\r\n *\r\n * @param {number|string} hex The value to convert.\r\n *\r\n * @returns {number} The base-10 equivalent of `hex`.\r\n * @private\r\n */\r\nfunction hexToDec(hex) {\r\n  return parseInt(hex, 16)\r\n}\r\n\r\n/**\r\n * Convert a hexadecimal string to an array with three items, one each for\r\n * the red, blue, and green decimal values.\r\n *\r\n * @param {string} hex A hexadecimal string.\r\n *\r\n * @returns {Array.<number>} The converted Array of RGB values if `hex` is a\r\n * valid string, or an Array of three 0's.\r\n * @private\r\n */\r\nconst hexToRGBArray = hex => {\r\n  hex = hex.replace(/#/, '')\r\n\r\n  // If the string is a shorthand three digit hex notation, normalize it to\r\n  // the standard six digit notation\r\n  if (hex.length === 3) {\r\n    hex = hex.split('')\r\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2]\r\n  }\r\n\r\n  return [\r\n    hexToDec(hex.substr(0, 2)),\r\n    hexToDec(hex.substr(2, 2)),\r\n    hexToDec(hex.substr(4, 2)),\r\n  ]\r\n}\r\n\r\n/**\r\n * @param {string} hexString\r\n *\r\n * @return {string}\r\n * @private\r\n */\r\nconst convertHexToRGB = hexString =>\r\n  `rgb(${hexToRGBArray(hexString).join(',')})`\r\n\r\n/**\r\n * TODO: Can this be rewritten to leverage String#replace more efficiently?\r\n * Runs a filter operation on all chunks of a string that match a RegExp.\r\n *\r\n * @param {RegExp} pattern\r\n * @param {string} unfilteredString\r\n * @param {function(string)} filter\r\n *\r\n * @return {string}\r\n * @private\r\n */\r\nconst filterStringChunks = (pattern, unfilteredString, filter) => {\r\n  const patternMatches = unfilteredString.match(pattern)\r\n  let filteredString = unfilteredString.replace(pattern, VALUE_PLACEHOLDER)\r\n\r\n  if (patternMatches) {\r\n    patternMatches.forEach(\r\n      match =>\r\n        (filteredString = filteredString.replace(\r\n          VALUE_PLACEHOLDER,\r\n          filter(match)\r\n        ))\r\n    )\r\n  }\r\n\r\n  return filteredString\r\n}\r\n\r\n/**\r\n * @param {string} str\r\n *\r\n * @return {string}\r\n * @private\r\n */\r\nconst sanitizeHexChunksToRGB = str =>\r\n  filterStringChunks(R_HEX, str, convertHexToRGB)\r\n\r\n/**\r\n * Convert all hex color values within a string to an rgb string.\r\n *\r\n * @param {Object} stateObject\r\n * @private\r\n */\r\nconst sanitizeObjectForHexProps = stateObject => {\r\n  for (const prop in stateObject) {\r\n    const currentProp = stateObject[prop]\r\n\r\n    if (typeof currentProp === 'string' && currentProp.match(R_HEX)) {\r\n      stateObject[prop] = sanitizeHexChunksToRGB(currentProp)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @param {string} rgbChunk\r\n *\r\n * @return {string}\r\n * @private\r\n */\r\nconst sanitizeRGBChunk = rgbChunk => {\r\n  const numbers = rgbChunk.match(R_UNFORMATTED_VALUES).map(Math.floor)\r\n  const prefix = rgbChunk.match(R_RGB_PREFIX)[0]\r\n\r\n  return `${prefix}${numbers.join(',')})`\r\n}\r\n\r\n/**\r\n * Check for floating point values within rgb strings and round them.\r\n *\r\n * @param {string} formattedString\r\n *\r\n * @return {string}\r\n * @private\r\n */\r\nconst sanitizeRGBChunks = formattedString =>\r\n  filterStringChunks(R_RGB, formattedString, sanitizeRGBChunk)\r\n\r\n/**\r\n * Note: It's the duty of the caller to convert the Array elements of the\r\n * return value into numbers.  This is a performance optimization.\r\n *\r\n * @param {string} formattedString\r\n *\r\n * @return {Array.<string>|null}\r\n * @private\r\n */\r\nconst getValuesFrom = formattedString =>\r\n  formattedString.match(R_UNFORMATTED_VALUES)\r\n\r\n/**\r\n * @param {Object} stateObject\r\n *\r\n * @return {Object} An Object of formatSignatures that correspond to\r\n * the string properties of stateObject.\r\n * @private\r\n */\r\nconst getFormatSignatures = stateObject => {\r\n  const signatures = {}\r\n\r\n  for (const propertyName in stateObject) {\r\n    const property = stateObject[propertyName]\r\n\r\n    if (typeof property === 'string') {\r\n      signatures[propertyName] = {\r\n        formatString: getFormatStringFrom(property),\r\n        chunkNames: getFormatChunksFrom(getValuesFrom(property), propertyName),\r\n      }\r\n    }\r\n  }\r\n\r\n  return signatures\r\n}\r\n\r\n/**\r\n * @param {Object} stateObject\r\n * @param {Object} formatSignatures\r\n * @private\r\n */\r\nconst expandFormattedProperties = (stateObject, formatSignatures) => {\r\n  for (const propertyName in formatSignatures) {\r\n    getValuesFrom(stateObject[propertyName]).forEach(\r\n      (number, i) =>\r\n        (stateObject[formatSignatures[propertyName].chunkNames[i]] = +number)\r\n    )\r\n\r\n    delete stateObject[propertyName]\r\n  }\r\n}\r\n\r\n/**\r\n * @param {Object} stateObject\r\n * @param {Array.<string>} chunkNames\r\n *\r\n * @return {Object} The extracted value chunks.\r\n * @private\r\n */\r\nconst extractPropertyChunks = (stateObject, chunkNames) => {\r\n  const extractedValues = {}\r\n\r\n  chunkNames.forEach(chunkName => {\r\n    extractedValues[chunkName] = stateObject[chunkName]\r\n    delete stateObject[chunkName]\r\n  })\r\n\r\n  return extractedValues\r\n}\r\n\r\n/**\r\n * @param {Object} stateObject\r\n * @param {Array.<string>} chunkNames\r\n *\r\n * @return {Array.<number>}\r\n * @private\r\n */\r\nconst getValuesList = (stateObject, chunkNames) =>\r\n  chunkNames.map(chunkName => stateObject[chunkName])\r\n\r\n/**\r\n * @param {string} formatString\r\n * @param {Array.<number>} rawValues\r\n *\r\n * @return {string}\r\n * @private\r\n */\r\nconst getFormattedValues = (formatString, rawValues) => {\r\n  rawValues.forEach(\r\n    rawValue =>\r\n      (formatString = formatString.replace(\r\n        VALUE_PLACEHOLDER,\r\n        +rawValue.toFixed(4)\r\n      ))\r\n  )\r\n\r\n  return formatString\r\n}\r\n\r\n/**\r\n * @param {Object} stateObject\r\n * @param {Object} formatSignatures\r\n * @private\r\n */\r\nconst collapseFormattedProperties = (stateObject, formatSignatures) => {\r\n  for (const prop in formatSignatures) {\r\n    const { chunkNames, formatString } = formatSignatures[prop]\r\n\r\n    const currentProp = getFormattedValues(\r\n      formatString,\r\n      getValuesList(extractPropertyChunks(stateObject, chunkNames), chunkNames)\r\n    )\r\n\r\n    stateObject[prop] = sanitizeRGBChunks(currentProp)\r\n  }\r\n}\r\n\r\n/**\r\n * @param {Object} easingObject\r\n * @param {Object} tokenData\r\n * @private\r\n */\r\nconst expandEasingObject = (easingObject, tokenData) => {\r\n  for (const prop in tokenData) {\r\n    const { chunkNames } = tokenData[prop]\r\n    const easing = easingObject[prop]\r\n\r\n    if (typeof easing === 'string') {\r\n      const easingNames = easing.split(' ')\r\n      const defaultEasing = easingNames[easingNames.length - 1]\r\n\r\n      chunkNames.forEach(\r\n        (chunkName, i) =>\r\n          (easingObject[chunkName] = easingNames[i] || defaultEasing)\r\n      )\r\n    } else {\r\n      // easing is a function\r\n      chunkNames.forEach(chunkName => (easingObject[chunkName] = easing))\r\n    }\r\n\r\n    delete easingObject[prop]\r\n  }\r\n}\r\n\r\n/**\r\n * @param {Object} easingObject\r\n * @param {Object} tokenData\r\n * @private\r\n */\r\nconst collapseEasingObject = (easingObject, tokenData) => {\r\n  for (const prop in tokenData) {\r\n    const { chunkNames } = tokenData[prop]\r\n    const firstEasing = easingObject[chunkNames[0]]\r\n\r\n    if (typeof firstEasing === 'string') {\r\n      easingObject[prop] = chunkNames\r\n        .map(chunkName => {\r\n          const easingName = easingObject[chunkName]\r\n          delete easingObject[chunkName]\r\n\r\n          return easingName\r\n        })\r\n        .join(' ')\r\n    } else {\r\n      // firstEasing is a function\r\n      easingObject[prop] = firstEasing\r\n    }\r\n  }\r\n}\r\n\r\nexport const doesApply = ({ _currentState }) =>\r\n  Object.keys(_currentState).some(key => typeof _currentState[key] === 'string')\r\n\r\nexport function tweenCreated(tweenable) {\r\n  const { _currentState, _originalState, _targetState } = tweenable\r\n\r\n  ;[_currentState, _originalState, _targetState].forEach(\r\n    sanitizeObjectForHexProps\r\n  )\r\n\r\n  tweenable._tokenData = getFormatSignatures(_currentState)\r\n}\r\n\r\nexport function beforeTween(tweenable) {\r\n  const {\r\n    _currentState,\r\n    _originalState,\r\n    _targetState,\r\n    _easing,\r\n    _tokenData,\r\n  } = tweenable\r\n\r\n  expandEasingObject(_easing, _tokenData)\r\n  ;[_currentState, _originalState, _targetState].forEach(state =>\r\n    expandFormattedProperties(state, _tokenData)\r\n  )\r\n}\r\n\r\nexport function afterTween(tweenable) {\r\n  const {\r\n    _currentState,\r\n    _originalState,\r\n    _targetState,\r\n    _easing,\r\n    _tokenData,\r\n  } = tweenable\r\n  ;[_currentState, _originalState, _targetState].forEach(state =>\r\n    collapseFormattedProperties(state, _tokenData)\r\n  )\r\n\r\n  collapseEasingObject(_easing, _tokenData)\r\n}\r\n","import { Tweenable, composeEasingObject, tweenProps } from './tweenable'\r\n\r\n// Fake a Tweenable and patch some internals.  This approach allows us to\r\n// skip uneccessary processing and object recreation, cutting down on garbage\r\n// collection pauses.\r\nconst mockTweenable = new Tweenable()\r\nconst { filters } = Tweenable\r\n\r\n/**\r\n * Compute the midpoint of two Objects.  This method effectively calculates a\r\n * specific frame of animation that {@link shifty.Tweenable#tween} does many times\r\n * over the course of a full tween.\r\n *\r\n * ```\r\n * import { interpolate } from 'shifty';\r\n *\r\n * const interpolatedValues = interpolate({\r\n *     width: '100px',\r\n *     opacity: 0,\r\n *     color: '#fff'\r\n *   }, {\r\n *     width: '200px',\r\n *     opacity: 1,\r\n *     color: '#000'\r\n *   },\r\n *   0.5\r\n * );\r\n *\r\n * console.log(interpolatedValues); // Logs: {opacity: 0.5, width: \"150px\", color: \"rgb(127,127,127)\"}\r\n * ```\r\n *\r\n * @method shifty.interpolate\r\n * @param {Object} from The starting values to tween from.\r\n * @param {Object} to The ending values to tween to.\r\n * @param {number} position The normalized position value (between `0.0` and\r\n * `1.0`) to interpolate the values between `from` and `to` for.  `from`\r\n * represents `0` and `to` represents `1`.\r\n * @param {Object.<string|shifty.easingFunction>|string|shifty.easingFunction}\r\n * easing The easing curve(s) to calculate the midpoint against.  You can\r\n * reference any easing function attached to {@link shifty.Tweenable.formulas},\r\n * or provide the {@link shifty.easingFunction}(s) directly.  If omitted, this\r\n * defaults to \"linear\".\r\n * @param {number} [delay=0] Optional delay to pad the beginning of the\r\n * interpolated tween with.  This increases the range of `position` from (`0`\r\n * through `1`) to (`0` through `1 + delay`).  So, a delay of `0.5` would\r\n * increase all valid values of `position` to numbers between `0` and `1.5`.\r\n * @return {Object}\r\n */\r\nexport const interpolate = (from, to, position, easing, delay = 0) => {\r\n  const current = { ...from }\r\n  const easingObject = composeEasingObject(from, easing)\r\n\r\n  mockTweenable._filters.length = 0\r\n\r\n  mockTweenable.set({})\r\n  mockTweenable._currentState = current\r\n  mockTweenable._originalState = from\r\n  mockTweenable._targetState = to\r\n  mockTweenable._easing = easingObject\r\n\r\n  for (const name in filters) {\r\n    if (filters[name].doesApply(mockTweenable)) {\r\n      mockTweenable._filters.push(filters[name])\r\n    }\r\n  }\r\n\r\n  // Any defined value transformation must be applied\r\n  mockTweenable._applyFilter('tweenCreated')\r\n  mockTweenable._applyFilter('beforeTween')\r\n\r\n  const interpolatedValues = tweenProps(\r\n    position,\r\n    current,\r\n    from,\r\n    to,\r\n    1,\r\n    delay,\r\n    easingObject\r\n  )\r\n\r\n  // Transform data in interpolatedValues back into its original format\r\n  mockTweenable._applyFilter('afterTween')\r\n\r\n  return interpolatedValues\r\n}\r\n","export class Scene {\r\n  #tweenables = []\r\n\r\n  /**\r\n   * The {@link shifty.Scene} class provides a way to control groups of {@link\r\n   * shifty.Tweenable}s. It is lightweight, minimalistic, and meant to provide\r\n   * performant {@link shifty.Tweenable} batch control that users of Shifty\r\n   * might otherwise have to implement themselves. It is **not** a robust\r\n   * timeline solution, and it does **not** provide utilities for sophisticated\r\n   * animation sequencing or orchestration. If that is what you need for your\r\n   * project, consider using a more robust tool such as\r\n   * [Rekapi](http://jeremyckahn.github.io/rekapi/doc/) (a timeline layer built\r\n   * on top of Shifty).\r\n   *\r\n   * Please be aware that {@link shifty.Scene} does **not** perform any\r\n   * automatic cleanup. If you want to remove a {@link shifty.Tweenable} from a\r\n   * {@link shifty.Scene}, you must do so explicitly with either {@link\r\n   * shifty.Scene#remove} or {@link shifty.Scene#empty}.\r\n   *\r\n   * <p class=\"codepen\" data-height=\"677\" data-theme-id=\"0\" data-default-tab=\"js,result\" data-user=\"jeremyckahn\" data-slug-hash=\"qvZKbe\" style=\"height: 677px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;\" data-pen-title=\"Shifty Scene Demo\">\r\n   * <span>See the Pen <a href=\"https://codepen.io/jeremyckahn/pen/qvZKbe/\">\r\n   * Shifty Scene Demo</a> by Jeremy Kahn (<a href=\"https://codepen.io/jeremyckahn\">@jeremyckahn</a>)\r\n   * on <a href=\"https://codepen.io\">CodePen</a>.</span>\r\n   * </p>\r\n   * <script async src=\"https://static.codepen.io/assets/embed/ei.js\"></script>\r\n   * @param {...shifty.Tweenable} tweenables\r\n   * @see https://codepen.io/jeremyckahn/pen/qvZKbe\r\n   * @constructs shifty.Scene\r\n   */\r\n  constructor(...tweenables) {\r\n    tweenables.forEach(this.add.bind(this))\r\n  }\r\n\r\n  /**\r\n   * A copy of the internal {@link shifty.Tweenable}s array.\r\n   * @member shifty.Scene#tweenables\r\n   * @type {Array.<shifty.Tweenable>}\r\n   * @readonly\r\n   */\r\n  get tweenables() {\r\n    return [...this.#tweenables]\r\n  }\r\n\r\n  /**\r\n   * The {@link external:Promise}s for all {@link shifty.Tweenable}s in this\r\n   * {@link shifty.Scene} that have been configured with {@link\r\n   * shifty.Tweenable#setConfig}. Note that each call of {@link\r\n   * shifty.Scene#play} or {@link shifty.Scene#pause} creates new {@link\r\n   * external:Promise}s:\r\n   *\r\n   *     const scene = new Scene(new Tweenable());\r\n   *     scene.play();\r\n   *\r\n   *     Promise.all(scene.promises).then(() =>\r\n   *       // Plays the scene again upon completion, but a new promise is\r\n   *       // created so this line only runs once.\r\n   *       scene.play()\r\n   *     );\r\n   *\r\n   * @member shifty.Scene#promises\r\n   * @type {Array.<external:Promise>}\r\n   * @readonly\r\n   */\r\n  get promises() {\r\n    return this.#tweenables.map(({ _promise }) => _promise)\r\n  }\r\n\r\n  /**\r\n   * Add a {@link shifty.Tweenable} to be controlled by this {@link\r\n   * shifty.Scene}.\r\n   * @method shifty.Scene#add\r\n   * @param {shifty.Tweenable} tweenable\r\n   * @return {shifty.Tweenable} The {@link shifty.Tweenable} that was added.\r\n   */\r\n  add(tweenable) {\r\n    this.#tweenables.push(tweenable)\r\n\r\n    return tweenable\r\n  }\r\n\r\n  /**\r\n   * Remove a {@link shifty.Tweenable} that is controlled by this {@link\r\n   * shifty.Scene}.\r\n   * @method shifty.Scene#remove\r\n   * @param {shifty.Tweenable} tweenable\r\n   * @return {shifty.Tweenable} The {@link shifty.Tweenable} that was removed.\r\n   */\r\n  remove(tweenable) {\r\n    const index = this.#tweenables.indexOf(tweenable)\r\n\r\n    if (~index) {\r\n      this.#tweenables.splice(index, 1)\r\n    }\r\n\r\n    return tweenable\r\n  }\r\n\r\n  /**\r\n   * [Remove]{@link shifty.Scene#remove} all {@link shifty.Tweenable}s in this {@link\r\n   * shifty.Scene}.\r\n   * @method shifty.Scene#empty\r\n   * @return {Array.<shifty.Tweenable>} The {@link shifty.Tweenable}s that were\r\n   * removed.\r\n   */\r\n  empty() {\r\n    // Deliberate of the tweenables getter here to create a temporary array\r\n    return this.tweenables.map(this.remove.bind(this))\r\n  }\r\n\r\n  /**\r\n   * Is `true` if any {@link shifty.Tweenable} in this {@link shifty.Scene} is\r\n   * playing.\r\n   * @method shifty.Scene#isPlaying\r\n   * @return {boolean}\r\n   */\r\n  isPlaying() {\r\n    return this.#tweenables.some(tweenable => tweenable.isPlaying())\r\n  }\r\n\r\n  /**\r\n   * Play all {@link shifty.Tweenable}s from their beginning.\r\n   * @method shifty.Scene#play\r\n   * @return {shifty.Scene}\r\n   */\r\n  play() {\r\n    this.#tweenables.forEach(tweenable => tweenable.tween())\r\n\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * {@link shifty.Tweenable#pause} all {@link shifty.Tweenable}s in this\r\n   * {@link shifty.Scene}.\r\n   * @method shifty.Scene#pause\r\n   * @return {shifty.Scene}\r\n   */\r\n  pause() {\r\n    this.#tweenables.forEach(tweenable => tweenable.pause())\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * {@link shifty.Tweenable#resume} all paused {@link shifty.Tweenable}s.\r\n   * @method shifty.Scene#resume\r\n   * @return {shifty.Scene}\r\n   */\r\n  resume() {\r\n    this.#tweenables.forEach(tweenable => tweenable.resume())\r\n\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * {@link shifty.Tweenable#stop} all {@link shifty.Tweenable}s in this {@link\r\n   * shifty.Scene}.\r\n   * @method shifty.Scene#stop\r\n   * @param {boolean} [gotoEnd]\r\n   * @return {shifty.Scene}\r\n   */\r\n  stop(gotoEnd) {\r\n    this.#tweenables.forEach(tweenable => tweenable.stop(gotoEnd))\r\n    return this\r\n  }\r\n}\r\n","import { Tweenable } from './tweenable'\r\n\r\n/**\r\n * The Bezier magic in this file is adapted/copied almost wholesale from\r\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/cubic-bezier.js),\r\n * which was adapted from Apple code (which probably came from\r\n * [here](http://opensource.apple.com/source/WebCore/WebCore-955.66/platform/graphics/UnitBezier.h)).\r\n * Special thanks to Apple and Thomas Fuchs for much of this code.\r\n */\r\n\r\n/**\r\n *  Copyright (c) 2006 Apple Computer, Inc. All rights reserved.\r\n *\r\n *  Redistribution and use in source and binary forms, with or without\r\n *  modification, are permitted provided that the following conditions are met:\r\n *\r\n *  1. Redistributions of source code must retain the above copyright notice,\r\n *  this list of conditions and the following disclaimer.\r\n *\r\n *  2. Redistributions in binary form must reproduce the above copyright notice,\r\n *  this list of conditions and the following disclaimer in the documentation\r\n *  and/or other materials provided with the distribution.\r\n *\r\n *  3. Neither the name of the copyright holder(s) nor the names of any\r\n *  contributors may be used to endorse or promote products derived from\r\n *  this software without specific prior written permission.\r\n *\r\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n *  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n *  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n *  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\r\n *  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n *  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n *  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n *  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n *  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n *  POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n// port of webkit cubic bezier handling by http://www.netzgesta.de/dev/\r\n\r\n/**\r\n * @param {number} t\r\n * @param {number} p1x\r\n * @param {number} p1y\r\n * @param {number} p2x\r\n * @param {number} p2y\r\n * @param {number} duration\r\n * @returns {Function}\r\n * @private\r\n */\r\nfunction cubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\r\n  let ax = 0,\r\n    bx = 0,\r\n    cx = 0,\r\n    ay = 0,\r\n    by = 0,\r\n    cy = 0\r\n\r\n  const sampleCurveX = t => ((ax * t + bx) * t + cx) * t\r\n\r\n  const sampleCurveY = t => ((ay * t + by) * t + cy) * t\r\n\r\n  const sampleCurveDerivativeX = t => (3 * ax * t + 2 * bx) * t + cx\r\n\r\n  const solveEpsilon = duration => 1 / (200 * duration)\r\n\r\n  const fabs = n => (n >= 0 ? n : 0 - n)\r\n\r\n  const solveCurveX = (x, epsilon) => {\r\n    let t0, t1, t2, x2, d2, i\r\n\r\n    for (t2 = x, i = 0; i < 8; i++) {\r\n      x2 = sampleCurveX(t2) - x\r\n\r\n      if (fabs(x2) < epsilon) {\r\n        return t2\r\n      }\r\n\r\n      d2 = sampleCurveDerivativeX(t2)\r\n\r\n      if (fabs(d2) < 1e-6) {\r\n        break\r\n      }\r\n\r\n      t2 = t2 - x2 / d2\r\n    }\r\n\r\n    t0 = 0\r\n    t1 = 1\r\n    t2 = x\r\n\r\n    if (t2 < t0) {\r\n      return t0\r\n    }\r\n\r\n    if (t2 > t1) {\r\n      return t1\r\n    }\r\n\r\n    while (t0 < t1) {\r\n      x2 = sampleCurveX(t2)\r\n\r\n      if (fabs(x2 - x) < epsilon) {\r\n        return t2\r\n      }\r\n\r\n      if (x > x2) {\r\n        t0 = t2\r\n      } else {\r\n        t1 = t2\r\n      }\r\n\r\n      t2 = (t1 - t0) * 0.5 + t0\r\n    }\r\n\r\n    return t2 // Failure.\r\n  }\r\n\r\n  const solve = (x, epsilon) => sampleCurveY(solveCurveX(x, epsilon))\r\n\r\n  cx = 3 * p1x\r\n  bx = 3 * (p2x - p1x) - cx\r\n  ax = 1 - cx - bx\r\n  cy = 3 * p1y\r\n  by = 3 * (p2y - p1y) - cy\r\n  ay = 1 - cy - by\r\n\r\n  return solve(t, solveEpsilon(duration))\r\n}\r\n// End ported code\r\n\r\n/**\r\n *  GetCubicBezierTransition(x1, y1, x2, y2) -> Function.\r\n *\r\n *  Generates a transition easing function that is compatible\r\n *  with WebKit's CSS transitions `-webkit-transition-timing-function`\r\n *  CSS property.\r\n *\r\n *  The W3C has more information about CSS3 transition timing functions:\r\n *  http://www.w3.org/TR/css3-transitions/#transition-timing-function_tag\r\n *\r\n *  @param {number} x1\r\n *  @param {number} y1\r\n *  @param {number} x2\r\n *  @param {number} y2\r\n *  @return {Function}\r\n *  @private\r\n */\r\nconst getCubicBezierTransition = (x1, y1, x2, y2) => pos =>\r\n  cubicBezierAtTime(pos, x1, y1, x2, y2, 1)\r\n\r\n/**\r\n * Create a Bezier easing function and attach it to {@link\r\n * shifty.Tweenable.formulas}.  This function gives you total control over the\r\n * easing curve.  Matthew Lein's [Ceaser](http://matthewlein.com/ceaser/) is a\r\n * useful tool for visualizing the curves you can make with this function.\r\n * @method shifty.setBezierFunction\r\n * @param {string} name The name of the easing curve.  Overwrites the old\r\n * easing function on {@link shifty.Tweenable.formulas} if it exists.\r\n * @param {number} x1\r\n * @param {number} y1\r\n * @param {number} x2\r\n * @param {number} y2\r\n * @return {shifty.easingFunction} The {@link shifty.easingFunction} that was\r\n * attached to {@link shifty.Tweenable.formulas}.\r\n */\r\nexport const setBezierFunction = (name, x1, y1, x2, y2) => {\r\n  const cubicBezierTransition = getCubicBezierTransition(x1, y1, x2, y2)\r\n\r\n  cubicBezierTransition.displayName = name\r\n  cubicBezierTransition.x1 = x1\r\n  cubicBezierTransition.y1 = y1\r\n  cubicBezierTransition.x2 = x2\r\n  cubicBezierTransition.y2 = y2\r\n\r\n  return (Tweenable.formulas[name] = cubicBezierTransition)\r\n}\r\n\r\n/**\r\n * `delete` an easing function from {@link shifty.Tweenable.formulas}.  Be\r\n * careful with this method, as it `delete`s whatever easing formula matches\r\n * `name` (which means you can delete standard Shifty easing functions).\r\n * @method shifty.unsetBezierFunction\r\n * @param {string} name The name of the easing function to delete.\r\n * @return {boolean} Whether or not the functions was `delete`d.\r\n */\r\nexport const unsetBezierFunction = name => delete Tweenable.formulas[name]\r\n","/**\r\n * @namespace shifty\r\n */\r\n\r\nimport { processTweens, Tweenable, tween } from './tweenable'\r\nimport * as token from './token'\r\n\r\nTweenable.filters.token = token\r\n\r\nexport { processTweens, Tweenable, tween }\r\nexport { interpolate } from './interpolate'\r\nexport { Scene } from './scene'\r\nexport { setBezierFunction, unsetBezierFunction } from './bezier'\r\n\r\n/**\r\n * @external Promise\r\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise}\r\n */\r\n\r\n/**\r\n * @callback {Function} shifty.easingFunction\r\n * @param {number} position The normalized (0-1) position of the tween.\r\n * @return {number} The curve-adjusted value.\r\n */\r\n\r\n/**\r\n * @callback {Function} shifty.startFunction\r\n * @param {Object} state The current state of the tween.\r\n * @param {Object|undefined} [data] User-defined data provided via a {@link\r\n * shifty.tweenConfig}.\r\n */\r\n\r\n/**\r\n * Gets called for every tick of the tween.  This function is not called on the\r\n * final tick of the animation.\r\n * @callback {Function} shifty.renderFunction\r\n * @param {Object} state The current state of the tween.\r\n * @param {Object|undefined} [data] User-defined data provided via a {@link\r\n * shifty.tweenConfig}.\r\n * @param {number} timeElapsed The time elapsed since the start of the tween.\r\n */\r\n\r\n/**\r\n * @callback shifty.scheduleFunction\r\n * @param {Function} callback\r\n * @param {number} timeout\r\n */\r\n\r\n/**\r\n * @typedef {Object} shifty.tweenConfig\r\n * @property {Object} [from] Starting position.  If omitted, {@link\r\n * shifty.Tweenable#get} is used.\r\n * @property {Object} [to] Ending position.  The keys of this Object should\r\n * match those of `to`.\r\n * @property {number} [duration] How many milliseconds to animate for.\r\n * @property {number} [delay] How many milliseconds to wait before starting the\r\n * tween.\r\n * @property {shifty.startFunction} [start] Executes when the tween begins.\r\n * @property {shifty.renderFunction} [render] Executes on every tick. Legacy\r\n * property name: `step`.\r\n * @property\r\n * {Object.<string|shifty.easingFunction>|string|shifty.easingFunction}\r\n * [easing] Easing curve name(s) or {@link shifty.easingFunction}(s) to apply\r\n * to the properties of the tween.  If this is an Object, the keys should\r\n * correspond to `to`/`from`.  You can learn more about this in the {@tutorial\r\n * easing-function-in-depth} tutorial.\r\n * @property {Object} [data] Data that is passed to {@link\r\n * shifty.startFunction}, {@link shifty.renderFunction}, and {@link\r\n * shifty.promisedData}. Legacy property name: `attachment`.\r\n * @property {Function} [promise] Promise constructor for when you want\r\n * to use Promise library or polyfill Promises in unsupported environments.\r\n */\r\n\r\n/**\r\n * @typedef {Object} shifty.promisedData\r\n * @property {Object} state The current state of the tween.\r\n * @property {Object} data The `data` Object that the tween was configured with.\r\n * @property {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance to\r\n * which the tween belonged.\r\n */\r\n\r\n/**\r\n * Is called when a tween is created to determine if a filter is needed.\r\n * Filters are only added to a tween when it is created so that they are not\r\n * unnecessarily processed if they don't apply during an update tick.\r\n * @callback {Function} shifty.doesApplyFilter\r\n * @param {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance.\r\n * @return {boolean}\r\n */\r\n\r\n/**\r\n * Is called when a tween is created.  This should perform any setup needed by\r\n * subsequent per-tick calls to {@link shifty.beforeTween} and {@link\r\n * shifty.afterTween}.\r\n * @callback {Function} shifty.tweenCreatedFilter\r\n * @param {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance.\r\n */\r\n\r\n/**\r\n * Is called right before a tween is processed in a tick.\r\n * @callback {Function} shifty.beforeTweenFilter\r\n * @param {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance.\r\n */\r\n\r\n/**\r\n * Is called right after a tween is processed in a tick.\r\n * @callback {Function} shifty.afterTweenFilter\r\n * @param {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance.\r\n */\r\n\r\n/**\r\n * An Object that contains functions that are called at key points in a tween's\r\n * lifecycle.  Shifty can only process `Number`s internally, but filters can\r\n * expand support for any type of data.  This is the mechanism that powers\r\n * [string interpolation]{@tutorial string-interpolation}.\r\n * @typedef {Object} shifty.filter\r\n * @property {shifty.doesApplyFilter} doesApply Is called when a tween is\r\n * created.\r\n * @property {shifty.tweenCreatedFilter} tweenCreated Is called when a tween is\r\n * created.\r\n * @property {shifty.beforeTweenFilter} beforeTween Is called right before a\r\n * tween starts.\r\n * @property {shifty.afterTweenFilter} afterTween Is called right after a tween\r\n * ends.\r\n */\r\n"],"sourceRoot":""}